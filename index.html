<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { font-family: sans-serif; overflow: hidden; background: #000; color: #fff; }
    
    /* 跑馬燈容器 */
    .marquee-container {
      position: fixed;
      top: 20%;
      width: 100%;
      white-space: nowrap;
      font-size: 50px;
      font-weight: bold;
    }

    /* 跑馬燈動畫 */
    .marquee-text {
      display: inline-block;
      padding-left: 100%;
      animation: marquee 20s linear infinite;
    }

    @keyframes marquee {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

  
    }
  </style>
</head>
<body>
  <div class="marquee-container">
    <div class="marquee-text" id="displayBoard">載入留言中...</div>
  </div>
  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbwbplzkLckWDgruWxAt6RMNu5WBI2k36457bIxgk3iwyI8AGU5MI6qHMh6vb9Vs2nnS/exec";

    // 取得留言並更新跑馬燈
    async function updateMarquee() {
      const res = await fetch(API_URL);
      const messages = await res.json();
      document.getElementById('displayBoard').innerText = messages.join(" ｜ ");
    }

    // 發送新留言
    async function sendMessage() {
      const msg = document.getElementById('msgInput').value;
      if(!msg) return;
      
      await fetch(API_URL, {
        method: 'POST',
        body: JSON.stringify({ message: msg })
      });
      
      document.getElementById('msgInput').value = '';
      updateMarquee(); // 立即更新
    }

    // 每 10 秒自動抓取新留言
    setInterval(updateMarquee, 10000);
    updateMarquee();
  </script>
</body>

</html>

